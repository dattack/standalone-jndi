#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
language: java
jdk:
- openjdk8
dist: bionic
notifications:
  email:
    recipients:
    - dev@dattack.com
    on_success: always
    on_failure: always
  slack:
    secure: Ow2kNNMMefF905Z2Fy1/dZdCu5gC8xZ0bkiE3GjN5Ib3lcA3xpeerglg+3rey5N2FQLwN6/dkatzqu/pyM+MjAAtDGrbBYBNZ2n2n4/ckpnetpgTob+dKXcN7s/I/7eLnQ+eeOh1LP5ww3c6q2v1ofrTZwb5qH4Q5KjpMwuid7O01lBsX+QwOsPQdDLjLhndgzTi+uktgFoLO9uax65JrVHsqDy3orARX7/boVBtO9MuEf5BWFPI2oEOSPK2lWXx9FadezWJyHb3Iigrk10D2uVMXZh4GWuRSX7CjIp5UjU546f10WdBNPG811wHlygSEfCHaLKNQYPCzpQvXWJdfiRBJQ1ZHW5pceyZxgsFXKrxIedQrE3calVl/6bGThBF4RiqQ+Ar7R8N5JOV3T0qVMZ2crg7HJOphxAuS1t18ZzLX9XFQHugmrq2nJeKB3EwqFfgDS8eyRmGM1xJIz7b+pnzspSvhR7e5BCLxOYf7rKq8kDDxWwd7kcbfHTz6j/jvuj8zQoXrQnUbbC9IkGefg11vVdFQhYiMeaZSYF1hleDoR/7P7N9I/Q0DldIDC/2EBywTeTj4cVreFKp9Hydgk90gAtHHp0tetKN4SRNl1SsovZxz0NZnwxc/YtbDuNOmsKxsJ7kFuqXZLnS7JTkH5K7Ra4C1BkS5/ddoBtt2PE=
cache:
  directories:
  - "~/.m2/repository"
env:
  global:
  - secure: jfE1IqZHO8tTfdURsZG2mH9rCZUbfx9ETnooirTX22xmUoWmtrr96po/rSAfpV6D5o4q8DSK4KbjVnPK51k11GN9l/XgfiZ/DMg78GvZpop1hmGcvxuIdXTZbGCWkfsdKPTf7MkXSL5zJR4fVayNV6hbc6htqX7TII2ZB77haTwFc7MKo+ZbaaeGzJ5kJAHS0PLzTBTPk4keJ3KtaIetLDdQjO8vTSTH8HUJqLn+D1CaAjE0/Shi9+91UUPIEFCQXISVWtu3MonyLYuMSaYb/bMNupuY29o+hxDNvxHXHS2K2cITQQYqAdkdtBLqidMkqlB3XoLtzwV0yWEpyFNgLz//HLrcyljY0W2Q0v2FbCOvKBwN8s2mVUjQZyNoYIzQOCHmW2X4Iq4T7OIPUagapl+TgjbLcYWrtqn1sM+WYbLGCZ7aE08b6i7d4q1q52RO6+UUFTDIBL26PnIqIaFZdwV/khoak8JHaoXcIYiBx3e3he8NG3oO7KA4lCRFGK4ZZzv8/14oC80MY7MJOuU0jnDKQGKttInmmnBRSOUWheI6xabMuGitnplPfrV/p5ExM4vPgzvr/XlN/6HPgex/n+J1dlALj4wOYgXWorKUG8XMxWUH4TpAZg7HL3/Um3PllMzo8oF2ROHb52G0sT9agz+7vw5SINTy4Lly29xqTe4=
  - secure: DCevJz4nXYEug9q4VYNQfJVckSyWSwgofYc8expvqj2Xr4H0tNcaZ7RjccUFsqSTqw9GNtUvN45HLHnteAAAmByM6H0+bq3bZUj6ukzNsMw0WypztQ3rlr7C4gc2pT+m/iCFMVIY73MMT3IKtgnVxNg85BW7XkmyqqZMEa+3zKbFi7Dx+XljDRVbay5yDwZFjW0Ib6xlVwKcrfRv99HAMYHG3IAeB6pP5pIt9AXi06Z5JaxJgEgCcOj2JPH0siw42oGuWWA28mKANXill/bi8VVeDhTQBQ/umla0QOa1z4AMKy0mGUEHRR2dxINX2b7v2NCECu7mGvC1Wno5HggxsDw8GW5Q6H3oFXBXhzhAD+bQjELNYFSbHfgLnRNwLP88E8A5fT4N4gFUEabD6BxSVj2ge3Va3lA3h2dsGNwUuruTJKu8sfAjbfYsJ1zjoz9SJp+TWQjfitkhadR9thuqOswKDsMl9+yMMU6a86i/pIherCSUa9soM4HdxbuzDKDDDxXr0ZGQ2UNV4YC6bID709xEPli7NlhTRVJwQdCr7yIX0RyTZbU+V44RtQmTTwgMi0RYwsOmshETJJ1NGfT8EG5ARUm6emV9+hsL9lmebSQMF1iQuUMN2NVzmrTeilJxDbJePymyf7OuABdRLx+gOcohyhiDzI2Wqj7mlakR9Hc=
  - secure: v/qTCIrZoCVOHFhdIZYNuhVZOTrsjntL8NPt3SGkvfiEIO+3dyioIVFhFKHVfK6C3HLhbsi4V7Nwb8WZsqA3mNI02Jaz227BGGmsGU20uZOGDGKOFNT2DKupC0YnTvQht0WTL01BML/jfUQMMrJqHz0OCSYUCtjbkbuOHK89mQ65W5aoCgasxUAqcQ63zfZxxKYHRY8fPOENnriaGbT5j1X8Vkh682Qar5IxziY2lADEwUBlupf+7dcDnxbLxqHs4KzopIZj6pMMrZibwuogZWC74akbQByDHO8WV7x7Oa6Ckd+RrLtm03zOiaiE/nT0esKIgzIQGvoiDO1lRFGXXVnZgRpGOR4nH5XsRUc+j9FevAr5pWxSxEoCONObRVzr91GcMjT78DAqszvxgjgRdGvTV5W+2Uz6RCMU5bhLAagyjhMdzixdGcIAUNFzTDBgamdEijIRT2h1Zzs/gVsEnhVZVCghFSDptDZ072VpTIs4aghP9TkuRAPVvPJjlKaabqr1rVhpidRn60N1b2uh4mgB+d+VuedEQWBmy6CE/ZtdtZrDAg+QMCoHcmLJm43L3ca92iwSS20aoas4nzlEmMEG7rC2QIQSAuJRBITgvqIF9ufaizsdQchGfmez+BgwC5y7b2bJBS6J7WPNjR+lO5nx1HJC25/YCGbylL6sbDA=
  - secure: jXwAl56EXcKP0kAFM6eQcB8FR6o4xy9WgBo3XglGru7f9hShHPTjOVrylRuIHF/AJCo4/H6G1Ywuju1qBY5L2C29t6B4SMskYYN3NySZdSznlRDN0CyImJ1+YouVUJbBuKuiZjeEQoioYgrhtRzr0sP4cqPhjHIWmXP8PNryhTr8V/EdQhS/9oQ4KZhzDfHrWAWd2i9YRUtVzg4Lxm/tZQsRe9z2lEnFEbgyQbIJF5J+xtGI17KiUrPjcetT5J0RvTiwNi3z09xTRfwrWoj/BlUndsasWPHaovRPjrzWnAlo0gGbnDdoNqWg510P13HMvjt7he4y+qqBAjP7lvny1Fvvx2EMvPxtvVikoGd/aujZJX9Rrc9Hozz6wBdswLHKvGx5nDX3YLgU5XvlIfvlHxY6OOnI8LjnBnzzTnGdkPlIhy6T2ArCY340kHJLxjlmtSJml4l04LfWUPmElN1TaMLX99v//hOc8g/iJpH1B1fYhMjUCnXFhOl+FyCyNhgboHEX7UjyEtvh3hIPhiXX5NPhRRWhULUI/aBRO1JEUZisbdqRYIie04fGlDntKvPGeuyN7naIubvofOxsobM5NePrvipYzqZFSRVx7BX14PD47PwKCUcjn20UfFsDa5BePhOPN3vHaMk+9o17FHi9hWd1oOrsD1wWKVDFWouvd20=
install: mvn -P !build-extras install -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script: mvn -P !build-extras test -B
before_install:
- openssl aes-256-cbc -K $encrypted_711e5bbf5b76_key -iv $encrypted_711e5bbf5b76_iv
  -in .travis/codesigning.asc.enc -out .travis/codesigning.asc -d
- gpg --batch --fast-import .travis/codesigning.asc
deploy:
  skip_cleanup: true
  provider: script
  script: mvn -P sign,build-extras -s .travis/settings.xml deploy -DskipTests
  on:
    all_branches: true
    condition: "$TRAVIS_BRANCH =~ ^(master|develop)$"
