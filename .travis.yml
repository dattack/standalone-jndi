#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
language: java
jdk:
- openjdk8
dist: bionic
notifications:
  email:
    recipients:
    - dev@dattack.com
    on_success: always
    on_failure: always
cache:
  directories:
  - "~/.m2/repository"
env:
  global:
  - secure: dLndUscNrtrLONJ0xXe3hVItJsYdodV95KXYbetvSXT10n12u0gb+CbTQLkkOLhELbJYXaZzJiMBO2IUTdY7NlZXeAvYa5w/vS78DWRRxkn6J9AiEoQzlQuCmiQnUAjIeT/OT6INDlttMJ0kSsSm25/k3XnIgTzJ5iobwZnRGssIrAFxK7iGjuHRIoESt3XOQD7Jljhy+pjQ5v9qyUg5uqYEEnxAAEnlKm0+WT36c63ttXZMS/5MtFty2GTOhQU8d9jJY/hM87sB16CNQqHdJQBtXUFbj+4STLE0rmoqk1pJn1T7jSSZ2sBnQMPCPbdfzItSLiSCqu4r8Vi6iGgDqA+N81vCqGR+DZ5hjpelFLXEXmIBQt9uuNIQtSF6yGHILAJDvS//xMX9/TGSlnvO/0KaTxSA81QXkMQgh+rdIh93QJF6qjms4c5ahIAY+aYoM1FP2oXnnhsBTcwc6zsGuUCCk9W9VklzXddTEQz+wuWTurADSztlV0MuCcUpk8xw8GwKLmuc2USMILpxG9nYoY699YcXc023Hg1dUHHNnHZ54DUJu8xs14EgXXThqcKTOZxATcMrF4a7oRHy1tzmN9cmcv58cgWBlTRGaPr0fryITvKWJRQgI33z4TsHcCmKK10rfxQF3uBxBDkKMU3F72eu83f8Ry9RJ7jk89NXKB4=
  - secure: Z8ApjkuzuKryzVUi/WrsGT/BwJu1OMxpZvgaSoSEJnBJLJkTJkRwYOqf4ARDBgVw2PaMF8HTB6wLR7DTeIyu/Ao1ecfokVJ5XZ/RakgTafMnufQ/kc5pyoDrXHPmMZMr2XQtep/15xOhsIeJx3R5kTS2kxhxEsPgwTbq4JwK6ZlIT0rRibQGs8ZwPUfnkX/uaYrR07Rf0Oa4sW2rvwSXSj9irkZPQ1VNYbaApBXm0f5PWWuOO2PvGUdk2KMtwra44ksbwYdJ5NN/y8Dnj1Azm5233gCK8wiFGPZVsLs16BqO58RZPjjfgc8KOgGXz1TZ/Ce0GLtPXjiXHtTA4bVYYSTV0QcY164hqfo41N7nGNr3omG9aFB6M4ITzaadqg5HgBRnZiV8x3h+GZIomJTm1knxS46LsZ36X2FaWZ6eB2SAQ1HuT8WWqhwHeV0eBPoUeeXFHq8E2FHq0uSieCPOub4SZXsoe3Zo7+hTGX7OtqZt0AZouA64gwUE22zF0BNoWJovHRxT+Ve4a7X6M4tq8462IoVZ/IH/m+H+KJPkTDdVIAHhajUzwvsB18UtTY/dMceF0EBbAIQcrtpctlAOLsritzUUID4xD2SsnxvIIO1CNXRncG8rA8Uaxs2WUL/Q03alID9kXLmCgRmrh+lixH3eFnmX2lLDhJwprHaEwAA=
  - secure: fbvePWKLsXMjmhUrOu34sIrYLAjuOuMwBYW2DgOh4iWVK1UZEVCPr3YB9e7qDF7kILZoE8x4/HaVa7Hd+8DmvRS8oo2IQmvejn/imOIvyT6myhmXYtZXXVECY3lqG63oLmdIJIwWHoaWcToHof8gnF6kXVXbn3dJWgjBt7uIIjM4wI81FRhqKjK9wRqSrE8vzqVKzCRaVjNBAfUMuOWJsCkXgkxuy1yw/UjRB48PzG1J6CHnX7BVMA2Vh754SNCSZ4Ra4C/PGUW+71ipY7OGWH01EfRcJsxio7mGdS1+Z53SGFcUH7qczka25X96qeEAgwf52HPW9g3zYBk+oUzQsfVSe5ByqkQmcY0DTD20ZaLZA39gxbtBizL2vWupfgM4YNfYrd1mEQNq/cqq1+ZmG2BYsanE9+MMD+zqM8Rw+PBNlsQDpQ2Sr/vmUB1BGLmHu1xRIj7Lf6Ii6rJPEpRgDrYo5il4QOXex00lS6SMNDW/kYxvfBbqqeYWV3SQjNnzx+KAuyRPenM8iEMwfIdp+N+ucSOtBnIBVV+geCAFaJw75gJdetv1mPjZY7Bh8vPO3kipmWkEqBbNfqJKOMgxqPsMGOZV11Q+KxYc1MQFBaDE/HHwvsvinXKijcvc/3Es8vfzV0CsBEXRSuYqECulYjLaw67L/4FwvNc/7rDTJis=
  - secure: V4it1Hmvrzwhf8JHJ7mwlcSI7p6oSz2vhEzFtK7meBs3UBQeaKbwese0xz22QNRL92irUotg3+yR+ASdgy4cO5spnszxtnIYDTCL+H3UuLeUo30preif3UGYi/m9aCmkCktyoweNPVV00L/xCBGX8bpNnI7+rkUhjwaeucy5BxUp60BdJ9YZZKVWeLnBLaacoRrA5xcQiT1AOCzWGsUQQ1JUlIHPSRzN5p6pgdTwnREIQCO9uQerMhSsUXynETNEjqB+ilIOlUGYTLUJZwoA1LMY4b5xScrgEcmcEPBemZhjAJaGwL4xkPCAOQpJQAn4cr7gNfC09QhypXX13SX/nrWnAM6oUlYRXvR/QO4uLEKTVFfU2Fo+qHogZz1AEcWLqGggyVaBkYgs5FiwhBIrRvw+o5pAcFAXsYMzD3HVnv3Ev3LAijVdawHI5FUmIl/Uk9OOJJLGLk2k/bgUWUdgBXJtGPMqcykvya232t/Up8jKZVN6jPBW8JBvrvpTq0Biz+73cFqcP3wLhpV8WzOZX6O0i+crJLxq2wZP5jYzNQzw4vMUAR9ujZWXqGGz8Vg2mb4QnP8NhAUnx0/7rEHmY7yIKTlvjsAWEw9WWQJ8P0zctdp+9K0AP4FK02NShTiu4Wf5RiCrdrFMRqVRQp+SDU6+BV52lyPcQOAwiD5tjEI=
install: mvn -P !build-extras install -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script: mvn -P !build-extras test -B
before_install:
- openssl aes-256-cbc -K $encrypted_711e5bbf5b76_key -iv $encrypted_711e5bbf5b76_iv
  -in .travis/codesigning.asc.enc -out .travis/codesigning.asc -d
- gpg --batch --fast-import .travis/codesigning.asc
deploy:
  skip_cleanup: true
  provider: script
  script: mvn -P sign,build-extras -s .travis/settings.xml deploy -DskipTests
  on:
    all_branches: true
    condition: "$TRAVIS_BRANCH =~ ^(master|develop)$"
